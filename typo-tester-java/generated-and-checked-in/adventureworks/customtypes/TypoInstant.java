/**
 * File has been automatically generated by `typo`.
 *
 * IF YOU CHANGE THIS FILE YOUR CHANGES WILL BE OVERWRITTEN.
 */
package adventureworks.customtypes;

import java.time.Instant;
import java.time.OffsetDateTime;
import java.time.format.DateTimeFormatter;
import java.time.format.DateTimeFormatterBuilder;
import java.time.temporal.ChronoField;
import java.time.temporal.ChronoUnit;

/** This is `java.time.TypoInstant`, but with microsecond precision and transferred to and from postgres as strings. The reason is that postgres driver and db libs are broken */
public record TypoInstant(Instant value) {
  static public TypoInstant apply(Instant value) {
           return new TypoInstant(value.truncatedTo(ChronoUnit.MICROS));
         };
  static public TypoInstant apply(String str) {
           return apply(OffsetDateTime.parse(str, parser).toInstant());
         };
  static public TypoInstant now() {
           return new TypoInstant(Instant.now());
         };
  static DateTimeFormatter parser = new DateTimeFormatterBuilder().appendPattern("yyyy-MM-dd HH:mm:ss").appendFraction(ChronoField.MICRO_OF_SECOND, 0, 6, true).appendPattern("X").toFormatter();;
}